<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rules Based Classification for Migration • migrbc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Rules Based Classification for Migration">
<meta property="og:description" content="migrbc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">migrbc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/migrbc.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/statisticsnz/migrbc/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Rules Based Classification for Migration</h1>
                        <h4 class="author">Leshi Chen, Del Robinson, and Pubudu Senanayake</h4>
            
            <h4 class="date">2020-05-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/statisticsnz/migrbc/blob/master/vignettes/migrbc.Rmd"><code>vignettes/migrbc.Rmd</code></a></small>
      <div class="hidden name"><code>migrbc.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This package provides mechanisms for classifying border crossings using a rules-based methodology. The goal of performing this type of classification is to identify any potential long-term migrants. A long-term migration is defined as a border crossing involving a change in residence status. A border crossing counts as a long-term migration to/from a country if it entails a change from non-residence to residence or residence to non-residence. The rules-based classification that used to determine a long-term migration is defined by a threshold duration and a test duration, alternatively named window size. Under a 12/16 rule, for instance, the threshold duration is 12 months and the test duration (window size) is 16 months. With a 9/12 rule, the threshold duration is 9 months and the test duration (window size) is 12 months. This vignette demonstrates the use of the functions, by calculating the days of residence and migration statuses, with a small made-up set of border crossings. For more information about the methodology applied, please visit Stats NZ (2020) <a href="https://www.stats.govt.nz/methods/defining-migrants-using-travel-histories-and-the-1216-month-rule" class="uri">https://www.stats.govt.nz/methods/defining-migrants-using-travel-histories-and-the-1216-month-rule</a>.</p>
</div>
<div id="outcome-based-rules-for-classifying-migration" class="section level1">
<h1 class="hasAnchor">
<a href="#outcome-based-rules-for-classifying-migration" class="anchor"></a>Outcome-based rules for classifying migration</h1>
<p>Rules based classification simultaneously assign residence status and migration status, based on the direction of the border crossing, the person’s residence status before the crossing, and the length of time spent in or out of the country after the crossing. Obviously, the Outcome-based rules need to deal simultaneously with two sorts of units: border crossings and people, and hence, the input data must contain information about the two units. The following outlines the main table structure of the input data.</p>
<div id="the-format-of-input-data-border-crossing-information-data" class="section level3">
<h3 class="hasAnchor">
<a href="#the-format-of-input-data-border-crossing-information-data" class="anchor"></a>The format of input data (Border Crossing Information data):</h3>
<div class="l-body-outset">
<table class="table">
<colgroup>
<col width="14%">
<col width="13%">
<col width="15%">
<col width="18%">
<col width="21%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th><strong>journeyId</strong></th>
<th><strong>personId</strong></th>
<th><strong>is_arrival</strong></th>
<th><strong>date_crossing</strong></th>
<th><strong>journey_sequence</strong></th>
<th><strong>journeyId_prev</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>&lt;Integer&gt;</code></td>
<td><code>&lt;Integer&gt;</code></td>
<td><code>&lt;Integer&gt;</code></td>
<td><code>&lt;Character&gt;</code></td>
<td><code>&lt;Integer&gt;</code></td>
<td><code>&lt;Integer&gt;</code></td>
</tr>
<tr class="even">
<td><code>The id of a journey</code></td>
<td><code>The id of a person</code></td>
<td><code>The direction of the border crossing, i.e., 0:departure, 1:arrival</code></td>
<td><code>The date of border crossing, such as 2012-01-01</code></td>
<td><code>The order of multiple journeys made by the person</code></td>
<td><code>The previous journey id</code></td>
</tr>
</tbody>
</table>
</div>
<p>Sometimes, a piece of data about residences’ initial status is required. A residence initial status is referred to as the residence status before he/she made the first journey in the target country, i.e., New Zealand.</p>
</div>
<div id="the-format-of-initial-residence-status-data" class="section level3">
<h3 class="hasAnchor">
<a href="#the-format-of-initial-residence-status-data" class="anchor"></a>The format of initial residence status data:</h3>
<div class="l-body-outset">
<table class="table">
<colgroup>
<col width="25%">
<col width="42%">
<col width="32%">
</colgroup>
<thead><tr class="header">
<th><strong>personId </strong></th>
<th><strong>res_status_initial </strong></th>
<th><strong>date_finalised</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>&lt;Integer&gt;</code></td>
<td><code>&lt;Integer&gt;</code></td>
<td><code>&lt;Character&gt;</code></td>
</tr>
<tr class="even">
<td><code>The id of a person</code></td>
<td><code>The initial residence status: 0: Non-resident, 1: resident</code></td>
<td><code>The date of the residence status confirmed, such as 2010-01-01</code></td>
</tr>
</tbody>
</table>
</div>
<p>A comprehensive rules-based methodology is outlined as follows:</p>
</div>
<div id="rbc-algorithm-as-pseudo-code" class="section level2">
<h2 class="hasAnchor">
<a href="#rbc-algorithm-as-pseudo-code" class="anchor"></a>RBC algorithm as pseudo code</h2>
<div class="sourceCode" id="cb1"><html><body><pre class="r">---
Terms:
  Rb:  resident status before - Resident or NonResident
  Ra:  resident status after - Resident or NonResident
  LTM: Long term migration - true or false
  Journey: Travel movement of a person involving a border crossing:
           Depart or Arrive
 
Define Parameters:
  Tw: Window size - the maximum number of days within which the resident status of 
      the [persons journey] is resolved (specified as 487 days).
  Tm: Threshold for Accumulated days [outside the country as departed]. It is 
      required for Migration (specified as 365 days).
 
Derived Parameters:
  Tn: Threshold for Accumulated days required for Non-Migration (Tw-Tm). Journey
      stays within resident country (derived as 122 days).
  Ts: Threshold for instant assignment of non-migration for successive return 
      journeys (Tw-Tm)x2 (derived as 244 days).
 
Define the Input Set:
  Attributes of the person are
    - residence status before
    - date resolved residence status before -&gt; date Rb
    - list of journeys arranged in time ascending order
 
  Attributes of each journey are
    - journey identifier (JID)
    - date of crossing
    - direction
 
  Working Values for each journey
    - duration
 
  Final Results
    - journey identifier (JID)
    - prev journey identifier (prev JID)
    - residence status before (Rb)
    - residence status after (Ra)
    - long term migrant -&gt; LTM  ## or Rb or  Ra
    - date resolved residence status before -&gt; date Rb
    - date resolved residence status after -&gt; date Ra
    - date resolved long term migrant -&gt; date LTM
 
 
Algorithm:
  ## We calculate the outcomes for a single person
  ## pre-check and assignment
  ## check the provided journey list is a valid sequence and assign duration for
  ## each journey.
  For each journey in list of journeys
      ## arrive / arrive OR depart / depart
      if the journey direction has not changed from prior journey
          then raise error
      ## 0 if same day
      journey.duration is days elapsed until next journey 
      ## artificial to make later calculations easier
      if this is the last journey then duration is set to Tw 
   
     journey.prev journey id is the prior journey.journey id
 
 
  ## Run Main Calculations
  For each journeyUnderReview in list of journeys
      ## the resident status before of this journey is the resident status 
      ## after of the prior journey or person if first journey
      if first journey
         journeyUnderReview.[resident status before] = person.
         journeyUnderReview.[date Rb] = person.[date Rb]
      else
         journeyUnderReview.[resident status before] = previousJourney.
         journeyUnderReview.[date Rb] = previousJourney.[date Ra]
   
      ## Step 1 of 3 - find our migration direction status
   
      if (journeyUnderReview.[direction] is Depart AND 
         journeyUnderReview.[resident status before] is Resident)
         OR (journeyUnderReview.[direction] is Arrive 
         AND journeyUnderReview.[resident status before] is NonResident)
         
         JourneyMigrationDirection = Migration
      else
         JourneyMigrationDirection = Non-Migration
   
      ## Step 2 of 3 - look ahead to set *instant* LTM. These set LTM = false for
      ## any qualifying journeys basically any journey which is a return (Arrive
      ## for resident OR depart for NonResident) within Ts days of date of crossing
      ## of JourneyUnderReview do a look ahead to see if any Ts threshold for 
      ## instant non-migrations can be set.
   
      if JourneyMigrationDirection = Migration
         for each journey in list of journeys starting from the journeyUnderReview
             if journey.[date crossing] &gt; journeyUnderReview.[date crossing] + Ts
                Exit for loop
                
             ## The journeyUnderReview is in migration direction and journey is a 
             ## return.
             if journey.[sequence] is Even 
                 journey.[long term migration] = false
                 journey.[date LTM] = maximum ( journey.[date of crossing] )
                                      and ( journeyUnderReview.[date Rb] )
   
   
       ## Step 3.1 of 3 - resolve the JourneyUnderReview – Non-Migrating direction
       ## Non Migrating direction calculation is simple – the journey is not
       ## a migration.
       if JourneyMigrationDirection = Non-Migration
          AssignNoMigration ( journeyUnderReview, 0 )
  
       ## Step 3.2 of 3 - resolve the JourneyUnderReview – Migrating direction
       ## For the journey under review (assume = #1), odd successive journeys 
       ## contribute to days migrating and even journeys contribute to days
       ## not migrating. Now we loop through successive journeys to this one and
       ## accumulate days migrating and days non migrating.

       if JourneyMigrationDirection = Migration
          for each journey in list of journeys starting from the journeyUnderReview
              AccumulatedDaysMigration = cumulative sum (odd journey duration)
              AccumulatedDaysNoMigration = cumulative sum (even journey duration)
   
              ## eventually one of the conditions will be met
              if AccumulatedDaysMigration &gt;= Tm 
                 AssignMigration(journeyUnderReview, AccumulatedDaysNoMigration) 
                 and exit for loop
              if AccumulatedDaysNoMigration &gt;= Tn 
                 AssignNoMigration(journeyUnderReview, AccumulatedDaysMigration)
                 and exit for loop
   
       ## journeyUnderReview has been resolved 
       add journeyUnderReview to results
   
       ## setup for next loop
       previousJourney = journeyUnderReview
 
 
Sub Routines for Clarity
 
  AssignMigration ( journeyUnderReview, AccumulatedDaysNoMigration )
      ## migration has happened so LTM is true and residence status is flipped
      journeyUnderReview.[long term migration] = true
      journeyUnderReview.[date LTM] = crossing date + Tm + 
        AccumulatedDaysNoMigration
      journeyUnderReview.[resident status after] = opposite of journeyUnderReview.
      journeyUnderReview.[date Ra] = journeyUnderReview.[date LTM]
   
  AssignNoMigration ( journeyUnderReview, AccumulatedDaysMigration )
      ## No migration has happened so LTM is false and residence status stays same
      journeyUnderReview.[resident status after]= journeyUnderReview.
      ## date Ra cannot be earlier than date Rb
      journeyUnderReview.[date Ra] = maximum of (crossing date + Tn + 
                       AccumulatedDaysMigration) and (journeyUnderReview.[date Rb])
   
      ## we only need to set LTM if it has not already been instant assigned 
      if journeyUnderReview.[long term migration] is not known
         journeyUnderReview.[long term migration] = false
         journeyUnderReview.[date LTM] = maximum of (crossing date + Tn + 
               AccumulatedDaysMigration) and  (journeyUnderReview.[date Rb]) 
---</pre></body></html></div>
</div>
</div>
<div id="using-the-migrbc-package" class="section level1">
<h1 class="hasAnchor">
<a href="#using-the-migrbc-package" class="anchor"></a>Using the <code>migrbc</code> Package</h1>
<p>The function ‘run_rbc’ is the main function of the package ‘migrbc’ for users to classify their migrants based on the rules defined in the algorithm section. The following table lists the parameters of the function.</p>
<div id="parameters-of-the-function-run_rbc" class="section level3">
<h3 class="hasAnchor">
<a href="#parameters-of-the-function-run_rbc" class="anchor"></a>Parameters of the Function <code>run_rbc</code>:</h3>
<div class="l-body-outset">
<table class="table">
<colgroup>
<col width="26%">
<col width="73%">
</colgroup>
<thead><tr class="header">
<th><strong>Parameters</strong></th>
<th><strong>Description</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>crossing_data</code></td>
<td><code>A pre-processed group data contain journeys, movements and IRS or the raw crossing data.</code></td>
</tr>
<tr class="even">
<td><code>init_res_status_data</code></td>
<td><code>The raw data of the initial residence status in the format of data frame.</code></td>
</tr>
<tr class="odd">
<td><code>window_size</code></td>
<td><code>The maximum length of the scanning period. Can be an integer giving the number of days, the result of a call to function difftime, or an object of class Duration.</code></td>
</tr>
<tr class="even">
<td><code>threshold_year</code></td>
<td><code>The length of the yearly test period. Can be an integer giving the number of days, the result of a call to function difftime, or an object of class Duration.</code></td>
</tr>
<tr class="odd">
<td><code>parallel</code></td>
<td><code>Logical. Whether to use parallel processing, to speed up the calculation of migration statuses. Defaults to TRUE.</code></td>
</tr>
<tr class="even">
<td><code>n_core</code></td>
<td><code>The number of cores to use, if parallel is TRUE. Defaults to 2. Higher values will typically result in faster calculations on computers with more than two cores.</code></td>
</tr>
<tr class="odd">
<td><code>max_ram</code></td>
<td><code>Optional, it is used to limit the RAM that can be used by this function. The default value is 5 Gb.</code></td>
</tr>
<tr class="even">
<td><code>include_error_columns</code></td>
<td><code>Optional, if it is TRUE, the returned result of error_data will contain two extra columns error_code and error_message.</code></td>
</tr>
<tr class="odd">
<td><code>mc.cleanup</code></td>
<td><code>Optional, if set to TRUE then all children that have been forked by this function will be killed (by sending SIGTERM) before this function returns. Under normal circumstances mclapply waits for the children to deliver results, so this option usually has only effect when mclapply is interrupted. If set to FALSE then child processes are collected, but not forcefully terminated. As a special case this argument can be set to the number of the signal that should be used to kill the children instead of SIGTERM.</code></td>
</tr>
</tbody>
</table>
</div>
<p>The parameter <code>crossing_data</code> can be a dataframe object or the data outputted from the usage of the function <code>pre_process</code>. The functionality of <code>pre_process</code> is to divide a large dataset into a number of sub datasets. The function <code>pre_process</code> is useful if the raw data is extreme large, for example, if we have a data of more than 1 million records, then it is better to divide the raw data into small subsets (n_groups = 10, 10 subgroups). The following lists the parameters of the function <code>pre_process</code>.</p>
</div>
<div id="parameters-of-the-function-pre_process" class="section level3">
<h3 class="hasAnchor">
<a href="#parameters-of-the-function-pre_process" class="anchor"></a>Parameters of the Function <code>pre_process</code>:</h3>
<table class="table">
<colgroup>
<col width="26%">
<col width="73%">
</colgroup>
<thead><tr class="header">
<th><strong>Parameters</strong></th>
<th><strong>Description</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>data</code></td>
<td><code>A dataframe object</code></td>
</tr>
<tr class="even">
<td><code>init_res_status_data</code></td>
<td><code>The raw data of the initial residence status in the format of data frame.</code></td>
</tr>
<tr class="odd">
<td><code>n_groups</code></td>
<td><code>The number of sub datasets that is likely to be returned.</code></td>
</tr>
</tbody>
</table>
<p>In this document, we provide a few examples to outline the main functionalities provided by the package. The first thing we need to do is attaching the package <code>migrbc</code>, <code>knitr</code> and <code>parallel</code> to your R studio as follows:</p>
</div>
<div id="attaching-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#attaching-packages" class="anchor"></a>Attaching packages</h2>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">migrbc</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">knitr</span>)
<span class="co"># If using the parallel processing option (only available on UNIX like systems)</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">parallel</span>)</pre></body></html></div>
</div>
<div id="setting-up-a-logger-optional" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-a-logger-optional" class="anchor"></a>Setting up a Logger (Optional)</h2>
<p>We applied futile.logger for troubleshooting and hence, provided an utility function for initializing the logger. More information about the logger can be found with the link (<a href="https://CRAN.R-project.org/package=futile.logger" class="uri">https://CRAN.R-project.org/package=futile.logger</a>). The parameter log_level is a number in the set of 1, 2, 4, 6, 8, and 9:</p>
<pre><code>futile.logger::FATAL: 1
futile.logger::ERROR: 2
futile.logger::WARN:  4
futile.logger::INFO:  6
futile.logger::DEBUG: 8
futile.logger::TRACE: 9</code></pre>
<p>If we would like to output the log information to a file, then you can set the parameter log_path to your own file path. By default, the log_level is set to 1 and log_path is set to NULL.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co">## to suppresse log messages to the console</span>
<span class="no">log_level</span> <span class="kw">&lt;-</span> <span class="fl">1</span>
<span class="no">log_path</span> <span class="kw">&lt;-</span> <span class="kw">NULL</span>
<span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/initialize_logger.html">initialize_logger</a></span>(<span class="kw">log_level</span> <span class="kw">=</span> <span class="no">log_level</span>,
                          <span class="kw">log_path</span> <span class="kw">=</span> <span class="no">log_path</span>)
<span class="co">#&gt; logger  'migrbc' has log_level=1 and writes to the console</span></pre></body></html></div>
</div>
<div id="creating-dummy-data" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-dummy-data" class="anchor"></a>Creating Dummy Data</h2>
<p>We use some random made-up data, which is generated by the function setup_random_test_data in the <code>migrbc</code> package. The first argument is the number of people we would like to generate; the second argument is the initial start date; the third argument is the number of journeys a person has; <code>min</code> and <code>max</code> define the random duration gap between two journeys’ crossing dates.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">number_of_people</span> <span class="kw">&lt;-</span> <span class="fl">10</span>
<span class="no">person_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/setup_random_test_data.html">setup_random_test_data</a></span>(<span class="no">number_of_people</span>,
                                              <span class="kw">initial_date</span> <span class="kw">=</span> <span class="st">"2001-01-01"</span>,
                                              <span class="kw">numJourneys</span> <span class="kw">=</span> <span class="fl">10</span>,
                                              <span class="kw">min</span> <span class="kw">=</span> <span class="fl">0</span>,
                                              <span class="kw">max</span> <span class="kw">=</span> <span class="fl">100</span>)</pre></body></html></div>
</div>
<div id="defining-threshold-and-test-duration" class="section level2">
<h2 class="hasAnchor">
<a href="#defining-threshold-and-test-duration" class="anchor"></a>Defining Threshold and Test Duration</h2>
<p>In this vignette, we use a 12/16 rule. In other words, the threshold period is 12 months, and the test period (window size) is 16 months - approximately. The “approximately” is necessary because in practice we define the threshold and test periods using days rather than months. Months are difficult to work with, since their lengths vary in complicated ways. The package defines these parameters as a number of days. Instead of 12 months we use 365 days, and instead of 16 months we use 487 days:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="co">## 12/16</span>
<span class="co">## threshold value</span>
<span class="no">dur_threshold_year</span> <span class="kw">&lt;-</span> <span class="fl">365</span>
<span class="co">## window size</span>
<span class="no">dur_ws</span> <span class="kw">&lt;-</span> <span class="fl">487</span></pre></body></html></div>
<p>If we prefer to process it by a <code>csv</code> file (not provided by the ‘migrbc’), which contains all required columns:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="co">## generate test data</span>
<span class="no">person_temp</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/setup_random_test_data.html">setup_random_test_data</a></span>(<span class="no">number_of_people</span>,
                                              <span class="kw">initial_date</span> <span class="kw">=</span> <span class="st">"2001-01-01"</span>,
                                              <span class="kw">numJourneys</span> <span class="kw">=</span> <span class="fl">10</span>,
                                              <span class="kw">min</span> <span class="kw">=</span> <span class="fl">0</span>,
                                              <span class="kw">max</span> <span class="kw">=</span> <span class="fl">100</span>)
<span class="co">## write to a temp file</span>
<span class="no">temp_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>()
<span class="kw pkg">utils</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span>(<span class="no">person_temp</span>,
                 <span class="kw">file</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">temp_path</span>, <span class="st">"data1.csv"</span>),
                 <span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="co">## read in files using the fread function from the data.table package</span>
<span class="no">person_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">utils</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">temp_path</span>, <span class="st">"data1.csv"</span>),
                               <span class="kw">stringsAsFactors</span> <span class="kw">=</span> <span class="no">F</span>)
<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">person_data</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>:<span class="fl">5</span>)]))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="right">journeyId</th>
<th align="right">personId</th>
<th align="right">is_arrival</th>
<th align="left">date_crossing</th>
<th align="right">journey_sequence</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2001-01-01</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">2001-01-02</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2001-01-24</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">2001-02-20</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2001-03-28</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">2001-05-21</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
</div>
<div id="pre-process-rbc" class="section level2">
<h2 class="hasAnchor">
<a href="#pre-process-rbc" class="anchor"></a>Pre-process RBC</h2>
<p>As mentioned in the beginning of this section, this process is ‘optional’ if we want to divide the input data into very small subgroups. It is useful to save memory space for a very large dataset (see Case 1-1). If we choose not to divide the data into a custom size of subgroups, we can pass the person_data directly to the main function, i.e., the main function for process RBC (see Case 1-2).</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">n_groups</span> <span class="kw">&lt;-</span> <span class="fl">10</span>
<span class="no">pre_processed_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/pre_process.html">pre_process</a></span>(<span class="no">person_data</span>,
                                         <span class="kw">n_groups</span> <span class="kw">=</span> <span class="no">n_groups</span>)</pre></body></html></div>
</div>
<div id="process-rbc" class="section level2">
<h2 class="hasAnchor">
<a href="#process-rbc" class="anchor"></a>Process RBC</h2>
<div id="case-1-1-classifying-rules-with-divided-sub-datasets-pre-processed" class="section level3">
<h3 class="hasAnchor">
<a href="#case-1-1-classifying-rules-with-divided-sub-datasets-pre-processed" class="anchor"></a>Case 1-1: classifying rules with divided sub-datasets (pre-processed)</h3>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="co">## run in non-parallel</span>
<span class="no">res</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/run_rbc.html">run_rbc</a></span>(<span class="no">pre_processed_data</span>,
                       <span class="kw">window_size</span> <span class="kw">=</span> <span class="no">dur_ws</span>,
                       <span class="kw">threshold_year</span> <span class="kw">=</span> <span class="no">dur_threshold_year</span>,
                       <span class="kw">parallel</span><span class="kw">=</span><span class="fl">FALSE</span>)

<span class="co">## run in parallel</span>
<span class="no">res</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/run_rbc.html">run_rbc</a></span>(<span class="no">pre_processed_data</span>,
                       <span class="kw">window_size</span> <span class="kw">=</span> <span class="no">dur_ws</span>,
                       <span class="kw">threshold_year</span> <span class="kw">=</span> <span class="no">dur_threshold_year</span>,
                       <span class="kw">parallel</span><span class="kw">=</span><span class="fl">TRUE</span>,
                       <span class="kw">n_core</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<p>The main function <code>run_rbc</code> can process raw data (a data frame object) directly if there is no need to create your own number of subgroups. In this case, the function <code>run_rbc</code> will divide the raw data with n_groups = n_core.</p>
</div>
<div id="case-1-2-classifying-rules-with-raw-data-non-pre-processed" class="section level3">
<h3 class="hasAnchor">
<a href="#case-1-2-classifying-rules-with-raw-data-non-pre-processed" class="anchor"></a>Case 1-2: classifying rules with raw data (non-pre-processed)</h3>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="co">## run in non-parallel with the raw data i.e., the person_data directly</span>
<span class="no">res</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/run_rbc.html">run_rbc</a></span>(<span class="no">person_data</span>,
                       <span class="kw">window_size</span> <span class="kw">=</span> <span class="no">dur_ws</span>,
                       <span class="kw">threshold_year</span> <span class="kw">=</span> <span class="no">dur_threshold_year</span>,
                       <span class="kw">parallel</span><span class="kw">=</span><span class="fl">FALSE</span>)

<span class="co">## run in parallel with the raw data i.e., the person_data directly</span>
<span class="no">res</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/run_rbc.html">run_rbc</a></span>(<span class="no">person_data</span>,
                       <span class="kw">window_size</span> <span class="kw">=</span> <span class="no">dur_ws</span>,
                       <span class="kw">threshold_year</span> <span class="kw">=</span> <span class="no">dur_threshold_year</span>,
                       <span class="kw">parallel</span><span class="kw">=</span><span class="fl">TRUE</span>,
                       <span class="kw">n_core</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
</div>
</div>
<div id="post-process" class="section level2">
<h2 class="hasAnchor">
<a href="#post-process" class="anchor"></a>Post-process</h2>
<p>The result returned from the function run_rbc (<code>migrbc</code>) contains two lists of person instances, i.e., good people list without error and bad people list with error.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="co">## good result</span>
<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">res</span>$<span class="no">journeys</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>)]))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="right">journeyId</th>
<th align="right">personId</th>
<th align="right">res_status_before</th>
<th align="right">res_status_after</th>
<th align="right">is_long_term_mig</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div id="including-error-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#including-error-columns" class="anchor"></a>Including error columns</h2>
<div id="case-2-1216-small-made-up-data-with-error" class="section level3">
<h3 class="hasAnchor">
<a href="#case-2-1216-small-made-up-data-with-error" class="anchor"></a>Case 2: 12/16 small made up data with error</h3>
<p>By default, the option ‘include_error_columns’ is FALSE. To view the columns ‘error_code’ and ‘error_message’ in the ‘error_data’, we need to set the option ‘include_error_columns’ to TRUE.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="co">## set up a test data with two person</span>
<span class="co">## a person with bad journeys</span>
<span class="no">j1</span> <span class="kw">&lt;-</span>       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">journeyId</span> <span class="kw">=</span> <span class="fl">1</span>,
              <span class="kw">personId</span> <span class="kw">=</span> <span class="fl">1</span>,
              <span class="kw">is_arrival</span> <span class="kw">=</span> <span class="fl">1</span>,
              <span class="kw">date_crossing</span> <span class="kw">=</span> <span class="st">"2014-02-13"</span>,
              <span class="kw">journey_sequence</span> <span class="kw">=</span> <span class="fl">1</span>,
              <span class="kw">journeyId_prev</span> <span class="kw">=</span> <span class="fl">NA</span>)
<span class="no">j2</span> <span class="kw">&lt;-</span>       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">journeyId</span> <span class="kw">=</span> <span class="fl">2</span>,
              <span class="kw">personId</span> <span class="kw">=</span> <span class="fl">1</span>,
              <span class="kw">is_arrival</span> <span class="kw">=</span> <span class="fl">1</span>,
              <span class="kw">date_crossing</span> <span class="kw">=</span> <span class="st">"2014-02-26"</span>,
              <span class="kw">journey_sequence</span> <span class="kw">=</span> <span class="fl">2</span>,
              <span class="kw">journeyId_prev</span> <span class="kw">=</span> <span class="fl">1</span>)
<span class="no">j3</span> <span class="kw">&lt;-</span>       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">journeyId</span> <span class="kw">=</span> <span class="fl">3</span>,
              <span class="kw">personId</span> <span class="kw">=</span> <span class="fl">2</span>,
              <span class="kw">is_arrival</span> <span class="kw">=</span> <span class="fl">1</span>,
              <span class="kw">date_crossing</span> <span class="kw">=</span> <span class="st">"2014-02-13"</span>,
              <span class="kw">journey_sequence</span> <span class="kw">=</span> <span class="fl">1</span>,
              <span class="kw">journeyId_prev</span> <span class="kw">=</span> <span class="fl">NA</span>)
<span class="no">j4</span> <span class="kw">&lt;-</span>       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">journeyId</span> <span class="kw">=</span> <span class="fl">4</span>,
              <span class="kw">personId</span> <span class="kw">=</span> <span class="fl">2</span>,
              <span class="kw">is_arrival</span> <span class="kw">=</span> <span class="fl">0</span>,
              <span class="kw">date_crossing</span> <span class="kw">=</span> <span class="st">"2014-02-26"</span>,
              <span class="kw">journey_sequence</span> <span class="kw">=</span> <span class="fl">2</span>,
              <span class="kw">journeyId_prev</span> <span class="kw">=</span> <span class="fl">1</span>)

<span class="co">## initial residence status data</span>
<span class="no">i1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">personId</span> <span class="kw">=</span> <span class="fl">1</span>,
        <span class="kw">res_status_initial</span> <span class="kw">=</span> <span class="fl">0</span>,
        <span class="kw">date_finalised</span> <span class="kw">=</span> <span class="st">"2017-01-01"</span>)
<span class="no">i2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">personId</span> <span class="kw">=</span> <span class="fl">2</span>,
        <span class="kw">res_status_initial</span> <span class="kw">=</span> <span class="fl">0</span>,
        <span class="kw">date_finalised</span> <span class="kw">=</span> <span class="st">"2017-01-01"</span>)

<span class="no">person_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">j1</span>, <span class="no">j2</span>, <span class="no">j3</span>, <span class="no">j4</span> ),
                             <span class="kw">stringsAsFactors</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">ini_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">i1</span>, <span class="no">i2</span>), <span class="kw">stringsAsFactors</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">post_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/run_rbc.html">run_rbc</a></span>(<span class="no">person_data</span>,
                             <span class="kw">init_res_status_data</span> <span class="kw">=</span> <span class="no">ini_data</span>,
                             <span class="kw">window_size</span> <span class="kw">=</span> <span class="fl">487</span>,
                             <span class="kw">threshold_year</span> <span class="kw">=</span> <span class="fl">365</span>,
                             <span class="kw">include_error_columns</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co">## good result</span>
<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">post_data</span>$<span class="no">journeys</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>)]))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">journeyId</th>
<th align="right">personId</th>
<th align="right">res_status_before</th>
<th align="right">res_status_after</th>
<th align="right">is_long_term_mig</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>3</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td>4</td>
<td align="right">4</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb13"><html><body><pre class="r">
<span class="co">## bad result</span>
<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">post_data</span>$<span class="no">error_data</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">14</span>, <span class="fl">15</span>)]))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="right">journeyId</th>
<th align="right">personId</th>
<th align="right">error_code</th>
<th align="left">error_message</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">‘is_arrival’ cannot be identical to previous one.</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">‘is_arrival’ cannot be identical to previous one.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="summary" class="section level1">
<h1 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h1>
<p>The goal of this document is to provide comprehensive examples to guide potential users to use the package effectively and efficiently. Some background information and the main algorithm are introduced. All information provided belongs to Stats NZ.</p>
</div>
<div id="appendix---plots-of-migration-histories" class="section level1">
<h1 class="hasAnchor">
<a href="#appendix---plots-of-migration-histories" class="anchor"></a>Appendix - Plots of migration histories</h1>
<p>Package <code>migrbc</code> contains a function called <code>plot_mig_hist</code> for plotting migration histories. Plots for the one person in random are generated as follows:</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">plot_test</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">mig_hist</span>) {
  <span class="fu"><a href="../reference/plot_mig_hist.html">plot_mig_hist</a></span>(<span class="kw">date_crossing</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">mig_hist</span>$<span class="no">date_crossing</span>),
                <span class="kw">is_arrival</span> <span class="kw">=</span> <span class="no">mig_hist</span>$<span class="no">is_arrival</span>,
                <span class="kw">days_to_next_crossing</span> <span class="kw">=</span> <span class="no">mig_hist</span>$<span class="no">days_to_next_crossing</span>,
                <span class="kw">show_date</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
                <span class="kw">cex</span> <span class="kw">=</span> <span class="fl">0.8</span>)
}
<span class="no">number_of_people</span> <span class="kw">&lt;-</span> <span class="fl">1</span>
<span class="no">person_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/setup_random_test_data.html">setup_random_test_data</a></span>(<span class="no">number_of_people</span>,
                                              <span class="kw">initial_date</span> <span class="kw">=</span> <span class="st">"2001-01-01"</span>,
                                              <span class="kw">numJourneys</span> <span class="kw">=</span> <span class="fl">3</span>,
                                              <span class="kw">min</span> <span class="kw">=</span> <span class="fl">0</span>,
                                              <span class="kw">max</span> <span class="kw">=</span> <span class="fl">100</span>)
<span class="co">## run in non-parallel</span>
<span class="no">post_data</span> <span class="kw">&lt;-</span> <span class="kw pkg">migrbc</span><span class="kw ns">::</span><span class="fu"><a href="../reference/run_rbc.html">run_rbc</a></span>(<span class="no">person_data</span>,
                       <span class="kw">window_size</span> <span class="kw">=</span> <span class="fl">487</span>,
                       <span class="kw">threshold_year</span> <span class="kw">=</span> <span class="fl">365</span>,
                       <span class="kw">parallel</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="co">## plot good result</span>
<span class="no">old_par</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>))
<span class="fu">plot_test</span>(<span class="no">post_data</span>$<span class="no">journeys</span>)</pre></body></html></div>
<p><img src="migrbc_files/figure-html/unnamed-chunk-12-1.png" width="681.6"></p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="no">old_par</span>)</pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Leshi Chen, Pubudu Senanayake, Del Robinson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
